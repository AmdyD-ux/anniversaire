<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Anniversaire Kiki ‚Äî By Mr D</title>
<meta name="theme-color" content="#ff5ea5">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap');
:root{ --rose-1:#ff6aa6; --rose-2:#ff9ec4; --rose-3:#ff3b8d; --vio-1:#b14cff; --txt:#fff; --muted:rgba(255,255,255,.72); }
*{box-sizing:border-box}
html,body{height:100%;scroll-behavior:smooth; margin:0; font-family:'Poppins', sans-serif; color:var(--txt); overflow-x:hidden}
body{
  background: radial-gradient(1200px 800px at 10% 0%, #ff99cc22, transparent), radial-gradient(1000px 700px at 90% 10%, #b14cff22, transparent), linear-gradient(180deg, #180915, #120715 60%, #100414);
}
.container{width:min(1200px,92%);margin:0 auto}

/* Header */
header{ position:sticky; top:0; z-index:1000; background:rgba(18,5,20,0.85); backdrop-filter:blur(14px); border-bottom:1px solid rgba(255,255,255,0.1); }
.nav{display:flex; align-items:center; justify-content:space-between; padding:12px 0}
.brand{display:flex; align-items:center; gap:10px}
.brand-logo{width:36px; height:36px; border-radius:12px; background:linear-gradient(135deg,var(--rose-1),var(--vio-1)); transform:rotate(-12deg); box-shadow: 0 5px 15px rgba(255,106,166,0.4)}
.brand h1{margin:0; font-size:18px; background:linear-gradient(90deg,#fff,#ffd3e7); -webkit-background-clip:text; color:transparent}

/* Hero Section */
.hero{padding:60px 0 30px; display:grid; grid-template-columns:1.2fr 1fr; gap:30px; align-items:center}
@media (max-width:900px){.hero{grid-template-columns:1fr; text-align:center}}
.kiki-title{font-size:clamp(30px,6vw,55px); font-weight:800; line-height:1.1; margin:0; background:linear-gradient(90deg,#fff,#ffd1e6); -webkit-background-clip:text; color:transparent; text-shadow: 0 10px 30px rgba(0,0,0,0.3)}
.btn{padding:14px 28px; border-radius:12px; border:none; background:linear-gradient(135deg,var(--rose-1),var(--rose-3)); color:white; font-weight:600; cursor:pointer; transition:0.3s; margin-top:20px; box-shadow:0 10px 30px rgba(255,64,128,0.3)}
.btn:hover{transform:translateY(-3px); box-shadow:0 15px 40px rgba(255,64,128,0.5)}

/* Countdown Card */
.card{margin-top:30px; padding:25px; border-radius:20px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.12); backdrop-filter: blur(5px)}
.countdown{display:flex; justify-content:center; gap:15px; margin-top:10px}
.num{font-size:32px; font-weight:800; color:var(--rose-1); text-shadow: 0 0 10px rgba(255,106,166,0.3)}
.label{font-size:12px; color:var(--muted); text-transform: uppercase; letter-spacing: 1px}

/* Heart & 21 */
.hero-right{position:relative; display:flex; justify-content:center; align-items:center}
.heart{ width:120px; height:120px; background:var(--rose-1); position:relative; transform:rotate(-45deg); animation:beat 1.2s infinite; box-shadow:0 0 50px rgba(255,64,128,0.4); z-index: 2}
.heart:before, .heart:after{content:''; width:120px; height:120px; background:var(--rose-1); border-radius:50%; position:absolute}
.heart:before{top:-60px; left:0} .heart:after{top:0; left:60px}
@keyframes beat{0%,100%{transform:rotate(-45deg) scale(1)} 50%{transform:rotate(-45deg) scale(1.1)}}
.big-21{position:absolute; font-size: 220px; font-weight: 800; color: white; opacity: 0.05; z-index: 1; user-select: none}

/* Gallery Grid */
.gallery-grid{display:grid; grid-template-columns:repeat(auto-fill, minmax(160px, 1fr)); gap:15px; margin-top:40px; padding-bottom: 100px}
.media-card{aspect-ratio:1; border-radius:15px; overflow:hidden; border:1px solid rgba(255,255,255,0.1); cursor:pointer; transition:0.4s; background: #000}
.media-card:hover{transform:scale(1.05); border-color: var(--rose-1); box-shadow: 0 10px 25px rgba(255,106,166,0.3)}
.media-card img, .media-card video{width:100%; height:100%; object-fit:cover}

/* Diaporama Modal SPECTACULAIRE */
.modal{position:fixed; inset:0; z-index:2000; display:none; background:rgba(0,0,0,0.98); backdrop-filter:blur(20px); align-items:center; justify-content:center; overflow: hidden}
.modal.open{display:flex}
.modal-bg-blur{position:absolute; inset:0; background-size:cover; background-position:center; filter:blur(60px) brightness(0.3); opacity:0.6; z-index:1}
.modal-content{width:100%; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; position:relative; z-index: 2}
.slide-item{max-width:90%; max-height:80%; object-fit:contain; border-radius:10px; box-shadow: 0 20px 60px rgba(0,0,0,0.8); animation:slideZoom 0.6s cubic-bezier(0.16, 1, 0.3, 1)}
@keyframes slideZoom{from{opacity:0; transform:scale(0.85) translateY(20px)} to{opacity:1; transform:scale(1) translateY(0)}}

.modal-head{position:absolute; top:20px; width:90%; display:flex; justify-content:space-between; align-items:center; color:white}
.close-modal{font-size:30px; color:white; cursor:pointer; background:rgba(255,255,255,0.1); border:none; width:50px; height:50px; border-radius:50%; transition: 0.3s}
.close-modal:hover{background: var(--rose-3); transform: rotate(90deg)}
.nav-btn{position:absolute; top:50%; width:60px; height:60px; background:rgba(255,255,255,0.1); border-radius:50%; border:1px solid rgba(255,255,255,0.2); color:white; font-size:24px; cursor:pointer; transition: 0.3s; z-index: 10}
.nav-btn:hover{background: var(--rose-1); transform: translateY(-50%) scale(1.1)}
#prevBtn{left:20px; transform: translateY(-50%)} #nextBtn{right:20px; transform: translateY(-50%)}

.progress-wrap{position:absolute; bottom:0; left:0; width:100%; height:5px; background:rgba(255,255,255,0.1)}
.progress-bar{height:100%; width:0%; background: linear-gradient(90deg, var(--rose-1), var(--vio-1)); transition: width 0.1s linear}

/* Music & Controls */
.music-btn{position:fixed; bottom:25px; right:25px; z-index:3000; width:55px; height:55px; border-radius:50%; background:var(--rose-1); border:none; color:white; font-size:22px; cursor:pointer; box-shadow:0 10px 25px rgba(0,0,0,0.4); transition: 0.3s}
.music-btn:hover{transform: scale(1.1) rotate(10deg)}
</style>
</head>
<body>

<audio id="bgMusic" loop><source src="musique.mp3" type="audio/mpeg"></audio>
<button class="music-btn" id="musicToggle">üéµ</button>

<header>
  <div class="container nav">
    <div class="brand"><div class="brand-logo"></div><h1>Kiki 21 ‚Ä¢ By Mr D</h1></div>
  </div>
</header>

<main class="container">
  <section class="hero">
    <div>
      <h2 class="kiki-title">Joyeux Anniversaire <br> Fatou Kin√© Iagne</h2>
      <p style="color:var(--muted); margin-top:15px; font-size: 18px">Un petit coin d'internet rien que pour toi, pour tes 21 ans. ‚ù§Ô∏è</p>
      <button class="btn" id="startShow">Lancer le Show ‚ú®</button>
      <div class="card">
        <div id="targetLabel" style="font-weight: 600; margin-bottom: 10px">Pr√©paration de la surprise...</div>
        <div class="countdown">
          <div class="unit"><div class="num" id="d">00</div><div class="label">Jours</div></div>
          <div class="unit"><div class="num" id="h">00</div><div class="label">Heures</div></div>
          <div class="unit"><div class="num" id="m">00</div><div class="label">Min</div></div>
          <div class="unit"><div class="num" id="s">00</div><div class="label">Sec</div></div>
        </div>
      </div>
    </div>
    <div class="hero-right">
      <div class="big-21">21</div>
      <div class="heart"></div>
    </div>
  </section>

  <section id="galerie">
    <h2 style="color:var(--rose-1); margin-top: 40px; border-left: 4px solid var(--rose-1); padding-left: 15px">Ta Galerie</h2>
    <div class="gallery-grid" id="galleryGrid"></div>
  </section>
</main>

<div class="modal" id="modal">
  <div class="modal-bg-blur" id="modalBgBlur"></div>
  <button class="close-modal" id="closeModal">‚úï</button>
  <div class="modal-content">
    <div class="modal-head">
      <span id="slideCount" style="letter-spacing: 2px; font-weight: 600">0 / 0</span>
    </div>
    <div id="modalMedia" style="width:100%; height:100%; display:flex; align-items:center; justify-content:center"></div>
    <div class="progress-wrap"><div class="progress-bar" id="progressBar"></div></div>
  </div>
  <button class="nav-btn" id="prevBtn">‚Üê</button>
  <button class="nav-btn" id="nextBtn">‚Üí</button>
</div>

<script>
/* 1. CONFIGURATION SELON TON R√âPERTOIRE */
const MY_FILES = [
  'Photo2.jpeg', 'Photo3.jpeg', 'Photo4.jpeg', 'Photo5.jpeg', 'Photo6.jpeg', 'Photo7.jpeg',
  'Video1.mp4', 'Video2.mp4', 'Video3.mp4', 'Video4.mp4', 'Video5.mp4', 'Video6.mp4', 'Video7.mp4', 'Video8.mp4'
];

const mediaList = MY_FILES.map(f => ({ 
  src: 'media/' + f, 
  type: f.toLowerCase().endsWith('mp4') ? 'video' : 'image' 
}));

/* 2. CR√âATION DE LA GRILLE */
const grid = document.getElementById('galleryGrid');
mediaList.forEach((m, i) => {
  const div = document.createElement('div');
  div.className = 'media-card';
  div.innerHTML = m.type === 'image' ? `<img src="${m.src}" loading="lazy">` : `<video src="${m.src}" muted></video>`;
  div.onclick = () => openModal(i);
  grid.appendChild(div);
});

/* 3. LOGIQUE DU DIAPORAMA */
let currentIndex = 0;
let autoTimer = null;
let progressInt = null;
const slideDuration = 5000; // 5 secondes par slide

const modal = document.getElementById('modal');
const modalMedia = document.getElementById('modalMedia');
const bgBlur = document.getElementById('modalBgBlur');
const bar = document.getElementById('progressBar');

function openModal(i) {
  currentIndex = i;
  modal.classList.add('open');
  renderSlide();
  startAuto();
  playMusic();
}

function renderSlide() {
  const item = mediaList[currentIndex];
  modalMedia.innerHTML = '';
  
  const el = document.createElement(item.type === 'image' ? 'img' : 'video');
  el.src = item.src;
  el.className = 'slide-item';
  if(item.type === 'video') {
    el.controls = true;
    el.autoplay = true;
    el.onended = nextSlide;
  }
  
  modalMedia.appendChild(el);
  if(item.type === 'image') bgBlur.style.backgroundImage = `url(${item.src})`;
  document.getElementById('slideCount').textContent = `${currentIndex + 1} / ${mediaList.length}`;

  // Effet confettis √† chaque slide
  confetti({ particleCount: 40, spread: 60, origin: { y: 0.8 }, colors: ['#ff6aa6', '#ffffff'] });
}

function nextSlide() { currentIndex = (currentIndex + 1) % mediaList.length; renderSlide(); startAuto(); }
function prevSlide() { currentIndex = (currentIndex - 1 + mediaList.length) % mediaList.length; renderSlide(); startAuto(); }

function startAuto() {
  clearInterval(autoTimer); clearInterval(progressInt);
  let start = Date.now();
  autoTimer = setInterval(nextSlide, slideDuration);
  progressInt = setInterval(() => {
    let p = ((Date.now() - start) / slideDuration) * 100;
    bar.style.width = Math.min(p, 100) + '%';
  }, 50);
}

document.getElementById('nextBtn').onclick = nextSlide;
document.getElementById('prevBtn').onclick = prevSlide;
document.getElementById('closeModal').onclick = () => {
  modal.classList.remove('open');
  modalMedia.innerHTML = ''; // Stop video
  clearInterval(autoTimer); clearInterval(progressInt);
};
document.getElementById('startShow').onclick = () => openModal(0);

/* 4. GESTION MUSIQUE */
const audio = document.getElementById('bgMusic');
const mBtn = document.getElementById('musicToggle');
function playMusic() { audio.play().catch(() => {}); }
mBtn.onclick = () => {
  if(audio.paused) { audio.play(); mBtn.innerHTML = 'üéµ'; }
  else { audio.pause(); mBtn.innerHTML = 'üîá'; }
};
document.addEventListener('click', playMusic, { once: true });

/* 5. COMPTE √Ä REBOURS & FEUX D'ARTIFICE */
function finalCelebration() {
  var end = Date.now() + (15 * 1000);
  (function frame() {
    confetti({ particleCount: 6, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ff6aa6', '#b14cff'] });
    confetti({ particleCount: 6, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#ff6aa6', '#b14cff'] });
    if (Date.now() < end) requestAnimationFrame(frame);
  }());
}

let targetDate = new Date(); targetDate.setHours(24,0,0,0); // Minuit ce soir
function updateCountdown() {
  let now = new Date();
  let diff = targetDate - now;
  
  if(diff <= 0) {
    document.getElementById('targetLabel').innerHTML = "‚ú® JOYEUX ANNIVERSAIRE KIKI ‚ù§Ô∏è ‚ú®";
    finalCelebration();
    return;
  }
  
  document.getElementById('targetLabel').textContent = "Bient√¥t ton moment sp√©cial...";
  document.getElementById('d').textContent = String(Math.floor(diff/86400000)).padStart(2,'0');
  document.getElementById('h').textContent = String(Math.floor((diff/3600000)%24)).padStart(2,'0');
  document.getElementById('m').textContent = String(Math.floor((diff/60000)%60)).padStart(2,'0');
  document.getElementById('s').textContent = String(Math.floor((diff/1000)%60)).padStart(2,'0');
}
setInterval(updateCountdown, 1000); updateCountdown();

// Petits confettis d'ambiance toutes les 7 secondes
setInterval(() => {
  if(!modal.classList.contains('open'))
  confetti({ particleCount: 15, origin: { x: Math.random(), y: 0.7 }, colors: ['#ff6aa6'] });
}, 7000);
</script>
</body>
</html>