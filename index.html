<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Anniversaire Kiki ‚Äî By Mr D</title>
<meta name="theme-color" content="#ff5ea5">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap');
:root{
  --rose-1:#ff6aa6;--rose-2:#ff9ec4;--rose-3:#ff3b8d;--vio-1:#b14cff;--txt:#fff;--muted:rgba(255,255,255,.72);
}
*{box-sizing:border-box}
html,body{height:100%;scroll-behavior:smooth}
body{
  margin:0;font-family:'Poppins',sans-serif;color:var(--txt);
  background:
    radial-gradient(1200px 800px at 10% 0%, #ff99cc22, transparent),
    radial-gradient(1000px 700px at 90% 10%, #b14cff22, transparent),
    linear-gradient(180deg, #180915, #120715 60%, #100414);
  overflow-x:hidden
}
.container{width:min(1200px,92%);margin:0 auto}

/* Header */
header{
  position:sticky;top:0;z-index:1000;background:rgba(18,5,20,.85);
  backdrop-filter:blur(14px);border-bottom:1px solid rgba(255,255,255,.08)
}
.nav{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
.brand{display:flex;align-items:center;gap:10px}
.brand-logo{width:36px;height:36px;border-radius:12px;background:linear-gradient(135deg,var(--rose-1),var(--vio-1));transform:rotate(-12deg)}
.brand h1{margin:0;font-weight:800;font-size:18px;background:linear-gradient(90deg,#fff,#ffd3e7);-webkit-background-clip:text;color:transparent}

/* Hero Section */
.hero{display:grid;grid-template-columns:1.2fr 1fr;gap:40px;padding:60px 0;align-items:center}
@media (max-width:900px){.hero{grid-template-columns:1fr;text-align:center}}
.kiki-title{font-size:clamp(30px,6vw,56px);line-height:1.1;margin:0;font-weight:800;background:linear-gradient(90deg,#fff,#ffd1e6);-webkit-background-clip:text;color:transparent}
.btn{display:inline-flex;padding:14px 28px;border-radius:12px;background:linear-gradient(135deg,var(--rose-1),var(--rose-3));color:#fff;border:none;font-weight:600;cursor:pointer;transition:.3s;margin-top:20px;box-shadow:0 10px 30px rgba(255,64,128,.3)}
.btn:hover{transform:translateY(-3px);box-shadow:0 15px 40px rgba(255,64,128,.5)}

/* Countdown Card */
.card{margin-top:30px;padding:20px;border-radius:20px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.12)}
.countdown{display:flex;gap:15px;justify-content:center;margin-top:10px}
.num{font-size:clamp(24px,5vw,36px);font-weight:800;color:var(--rose-1)}
.label{font-size:12px;color:var(--muted)}

/* Heart Animation */
.heart-wrap{display:flex;justify-content:center;position:relative}
.heart{
  width:130px;height:130px;background:var(--rose-1);transform:rotate(-45deg);
  position:relative;animation:beat 1.2s infinite;box-shadow:0 0 60px rgba(255,64,128,0.4)
}
.heart:before,.heart:after{content:'';width:130px;height:130px;background:var(--rose-1);border-radius:50%;position:absolute}
.heart:before{top:-65px;left:0}.heart:after{top:0;left:65px}
@keyframes beat{0%,100%{transform:rotate(-45deg) scale(1)}50%{transform:rotate(-45deg) scale(1.1)}}
.big-21{position:absolute;font-size:200px;font-weight:800;opacity:0.05;z-index:-1;top:50%;left:50%;transform:translate(-50%,-50%)}

/* Galerie */
.gallery-grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(180px, 1fr));gap:15px;margin-top:40px}
.media-card{aspect-ratio:1;border-radius:15px;overflow:hidden;border:1px solid rgba(255,255,255,.1);cursor:pointer;transition:.3s}
.media-card:hover{transform:scale(1.05);border-color:var(--rose-1)}
.media-card img, .media-card video{width:100%;height:100%;object-fit:cover}

/* --- DIAPORAMA SPECTACULAIRE --- */
.modal{position:fixed;inset:0;z-index:2000;display:none;background:#000;align-items:center;justify-content:center;overflow:hidden}
.modal.open{display:flex}
.modal-bg-blur{position:absolute;inset:0;background-size:cover;background-position:center;filter:blur(50px) brightness(0.3);opacity:0.7;z-index:1}
.modal-content{position:relative;z-index:2;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}
.slide-item{max-width:90%;max-height:80%;object-fit:contain;border-radius:10px;box-shadow:0 30px 60px rgba(0,0,0,0.5);animation:slideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1)}
@keyframes slideIn{from{opacity:0;transform:scale(0.9) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}

.modal-head{position:absolute;top:20px;width:90%;display:flex;justify-content:space-between;align-items:center;color:white}
.close-btn, .nav-btn{background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);color:white;width:50px;height:50px;border-radius:50%;cursor:pointer;display:grid;place-items:center;transition:.3s}
.close-btn:hover, .nav-btn:hover{background:var(--rose-1)}
.modal-nav{position:absolute;width:100%;padding:0 20px;display:flex;justify-content:space-between;pointer-events:none}
.nav-btn{pointer-events:auto}
.progress-wrap{position:absolute;bottom:0;left:0;width:100%;height:4px;background:rgba(255,255,255,0.1)}
.progress-bar{height:100%;width:0%;background:var(--rose-1);transition:width 0.1s linear}

/* Musique */
.music-ctrl{position:fixed;bottom:20px;right:20px;z-index:3000;width:50px;height:50px;border-radius:50%;background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2);color:white;cursor:pointer;font-size:20px}
</style>
</head>
<body>

<audio id="bgMusic" loop><source src="musique.mp3" type="audio/mpeg"></audio>
<button class="music-ctrl" id="musicBtn">üéµ</button>

<header>
  <div class="container nav">
    <div class="brand"><div class="brand-logo"></div><h1>Kiki 21 ‚Ä¢ By Mr D</h1></div>
  </div>
</header>

<main class="container">
  <section class="hero">
    <div>
      <h2 class="kiki-title">Joyeux Anniversaire <br> Fatou Kin√© Iagne</h2>
      <p style="color:var(--muted); margin-top:10px;">Un site rose, doux et interactif pour tes 21 ans.</p>
      <button class="btn" id="startShow">Lancer le Show ‚ú®</button>
      
      <div class="card">
        <div id="targetLabel" style="font-size:14px; margin-bottom:10px">Compte √† rebours...</div>
        <div class="countdown">
          <div style="text-align:center"><div class="num" id="d">00</div><div class="label">Jours</div></div>
          <div style="text-align:center"><div class="num" id="h">00</div><div class="label">Heures</div></div>
          <div style="text-align:center"><div class="num" id="m">00</div><div class="label">Min</div></div>
          <div style="text-align:center"><div class="num" id="s">00</div><div class="label">Sec</div></div>
        </div>
      </div>
    </div>
    <div class="hero-right">
      <div class="big-21">21</div>
      <div class="heart"></div>
    </div>
  </section>

  <section id="galerie">
    <h2 style="color:var(--rose-1); font-size:28px;">Galerie de Kiki</h2>
    <div class="gallery-grid" id="galleryGrid"></div>
  </section>
</main>

<div class="modal" id="modal">
  <div class="modal-bg-blur" id="modalBgBlur"></div>
  <div class="modal-content">
    <div class="modal-head">
      <span id="slideCount" style="font-weight:600">1 / 13</span>
      <button class="close-btn" id="closeModal">‚úï</button>
    </div>
    <div id="slideContainer" style="width:100%; display:flex; justify-content:center"></div>
    <div class="modal-nav">
      <button class="nav-btn" id="prevBtn">‚Üê</button>
      <button class="nav-btn" id="nextBtn">‚Üí</button>
    </div>
    <div class="progress-wrap"><div class="progress-bar" id="progressBar"></div></div>
  </div>
</div>

<script>
/* 1. CONFIGURATION DES FICHIERS */
const MY_FILES = [
  'Photo1.jpeg', 'Photo2.jpeg', 'Photo3.jpeg', 'Photo4.jpeg',
  'Photo5.jpeg', 'Photo6.jpeg', 'Photo7.jpeg',
  'Video1.mp4', 'Video2.mp4', 'Video3.mp4', 
  'Video4.mp4', 'Video5.mp4', 'Video6.mp4'
];

const mediaList = MY_FILES.map(f => ({
  src: 'media/' + f,
  type: f.toLowerCase().endsWith('mp4') ? 'video' : 'image'
}));

/* 2. RENDU DE LA GRILLE */
const grid = document.getElementById('galleryGrid');
mediaList.forEach((m, i) => {
  const card = document.createElement('div');
  card.className = 'media-card';
  card.innerHTML = m.type === 'image' ? `<img src="${m.src}" loading="lazy">` : `<video src="${m.src}" muted></video>`;
  card.onclick = () => openModal(i);
  grid.appendChild(card);
});

/* 3. LOGIQUE DU DIAPORAMA */
let currentIndex = 0;
let timer = null;
let progressInt = null;
const duration = 5000;

function openModal(idx) {
  currentIndex = idx;
  document.getElementById('modal').classList.add('open');
  renderSlide();
  startAuto();
  startMusic();
}

function renderSlide() {
  const container = document.getElementById('slideContainer');
  const bgBlur = document.getElementById('modalBgBlur');
  const item = mediaList[currentIndex];
  
  container.innerHTML = '';
  const el = document.createElement(item.type === 'image' ? 'img' : 'video');
  el.src = item.src;
  el.className = 'slide-item';
  if(item.type === 'video') { el.controls = true; el.autoplay = true; el.onended = nextSlide; }
  
  container.appendChild(el);
  if(item.type === 'image') bgBlur.style.backgroundImage = `url(${item.src})`;
  document.getElementById('slideCount').textContent = `${currentIndex + 1} / ${mediaList.length}`;

  // Explosion de confettis √† chaque photo
  confetti({ particleCount: 40, spread: 60, origin: { y: 0.8 }, colors: ['#ff6aa6', '#ffffff'] });
}

function nextSlide() { currentIndex = (currentIndex + 1) % mediaList.length; renderSlide(); startAuto(); }
function prevSlide() { currentIndex = (currentIndex - 1 + mediaList.length) % mediaList.length; renderSlide(); startAuto(); }

function startAuto() {
  clearInterval(timer); clearInterval(progressInt);
  const bar = document.getElementById('progressBar');
  let start = Date.now();
  timer = setInterval(nextSlide, duration);
  progressInt = setInterval(() => {
    let p = ((Date.now() - start) / duration) * 100;
    bar.style.width = Math.min(p, 100) + '%';
  }, 50);
}

document.getElementById('nextBtn').onclick = nextSlide;
document.getElementById('prevBtn').onclick = prevSlide;
document.getElementById('closeModal').onclick = () => {
  document.getElementById('modal').classList.remove('open');
  clearInterval(timer); clearInterval(progressInt);
};
document.getElementById('startShow').onclick = () => openModal(0);

/* 4. MUSIQUE */
const audio = document.getElementById('bgMusic');
const mBtn = document.getElementById('musicBtn');
function startMusic() { audio.play().catch(() => {}); }
mBtn.onclick = () => {
  if(audio.paused) { audio.play(); mBtn.innerHTML = 'üéµ'; }
  else { audio.pause(); mBtn.innerHTML = 'üîá'; }
};
// Lancer au premier clic sur le site
document.addEventListener('click', startMusic, { once: true });

/* 5. COMPTE √Ä REBOURS ET FEU D'ARTIFICE */
function fireworks() {
  var end = Date.now() + (15 * 1000);
  (function frame() {
    confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ff6aa6', '#b14cff'] });
    confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#ff6aa6', '#b14cff'] });
    if (Date.now() < end) requestAnimationFrame(frame);
  }());
}

let target = new Date(); target.setHours(24,0,0,0); // Prochain minuit
function updateCD() {
  let diff = target - new Date();
  if(diff <= 0) {
    document.getElementById('targetLabel').innerHTML = "‚ú® JOYEUX ANNIVERSAIRE KIKI ‚ù§Ô∏è ‚ú®";
    fireworks();
    return;
  }
  document.getElementById('targetLabel').textContent = "Temps restant avant ton jour sp√©cial :";
  document.getElementById('d').textContent = String(Math.floor(diff/86400000)).padStart(2,'0');
  document.getElementById('h').textContent = String(Math.floor((diff/3600000)%24)).padStart(2,'0');
  document.getElementById('m').textContent = String(Math.floor((diff/60000)%60)).padStart(2,'0');
  document.getElementById('s').textContent = String(Math.floor((diff/1000)%60)).padStart(2,'0');
}
setInterval(updateCD, 1000); updateCD();

// Confettis d'ambiance toutes les 6 secondes
setInterval(() => {
  if(!document.getElementById('modal').classList.contains('open'))
  confetti({ particleCount: 20, origin: { x: Math.random(), y: 0.7 }, colors: ['#ff6aa6'] });
}, 6000);
</script>
</body>
</html>